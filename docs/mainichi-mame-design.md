# 「毎日まめ」プロトタイプ設計書

## 1. リサーチ概要と前提
- 公開情報にアクセスできない環境のため、公式アプリ「毎日まめ」の詳細仕様は確認できていません。
- 一般的な生活習慣改善アプリおよび名称から、「毎日=毎日継続」「まめ=こまめに」のコンセプトを想定し、日々の健康・生活習慣をサポートする習慣化アプリとしてプロトタイプを設計します。
- 利用者が毎日少しずつタスクを実行し、豆（ポイント）やスタンプを貯めるゲーミフィケーション要素を備える想定です。

## 2. 想定するユーザーニーズ
1. **日々の小さな習慣を継続できる仕組み**：短時間で終わるタスクを登録し、習慣化を支援。
2. **進捗の可視化とモチベーション維持**：豆（ポイント）、連続達成日数、バッジなどを表示。
3. **柔軟なリマインダー**：朝・昼・夜など時間帯ごとに通知。
4. **健康・生活のカテゴリに応じたテンプレートタスク**：例：ストレッチ、日記、片付けなど。
5. **シンプルかつ直感的な操作**：モバイル端末での利用を想定したミニマルUI。

## 3. ペルソナ
- **名前**：佐藤あかり（28歳）
- **職業**：事務職
- **課題**：在宅勤務で生活リズムが乱れがち。運動不足と家事の先延ばしに悩む。
- **ニーズ**：短時間で完了できるタスクを可視化し、日々の達成感を得たい。
- **モチベーション**：連続達成やポイント獲得で自己効力感を得る。

## 4. バリュープロポジション
- 小さな行動を「豆」に例えて貯めるユニークな体験。
- 毎日の実行を重視した軽量な習慣トラッカー。
- 生活の5カテゴリ（健康・運動・家事・学習・ウェルビーイング）をテンプレートでサポート。

## 5. MVP機能スコープ
| 区分 | 機能 | 説明 |
| --- | --- | --- |
| アカウント | ローカルユーザー（初期版は匿名IDのみ） | デバイス内にユーザーデータを保存。 |
| タスク管理 | タスク一覧表示 | その日のタスク一覧、進捗バー表示。 |
|  | タスクテンプレート作成 | カテゴリ別の推奨タスクを初期設定。 |
|  | タスク追加・編集・削除 | カスタムタスク対応。 |
| 実行記録 | タスク完了チェック | 1日1回チェック、豆ポイント加算。 |
|  | 今日の記録入力 | 1日の総合スコア、ポジティブ/ネガティブ要因を簡単入力。 |
|  | 連続達成トラッキング | タスクごとに連続達成日数を計算。 |
| 振り返り | カレンダー表示 | 日毎のスコアと達成状況を可視化。 |
|  | ポジティブ/ネガティブランキング | 入力された出来事をカテゴリ別に集計。 |
| モチベーション | 豆ポイントとレベル | 完了数に応じたポイントとレベル表示。 |
| 通知 | ローカル通知スケジュール | OS通知APIを利用してリマインド。 |
| 設定 | 時間帯設定、通知オン/オフ | ユーザー設定保存。 |

## 6. 非機能要件
- **プラットフォーム**：スマートフォン（先行してReact Native or Expoベース）。
- **データ保存**：端末内のローカルストレージ（AsyncStorage）で完結。後続でクラウド同期を検討。
- **パフォーマンス**：タスク数50件程度で快適に操作できること。
- **アクセシビリティ**：カラーコントラスト、スクリーンリーダー対応。

## 7. アーキテクチャ方針
- **フロントエンド**：React Native (Expo)。
  - 状態管理：Zustand もしくは Redux Toolkit（MVPではZustandを採用）。
  - UI コンポーネント：Expo + React Native Paper を想定。
- **データモデル**：
  - `Task`：`id`, `title`, `category`, `schedule`, `reminderTime`, `streak`, `totalCompletions`。
  - `DailyLog`：`date`, `taskId`, `completed`, `dailyScore`, `positives[]`, `negatives[]`。
  - `UserSettings`：通知設定、テーマ、目標豆ポイント。
- **サービス層**：
  - `TaskService`：タスクCRUDとローカル保存。
  - `LogService`：当日の完了状態を記録。
  - `RewardService`：豆ポイント計算、レベル管理。

## 8. 画面設計（ワイヤーフレーム案）
1. **ホーム画面**
   - ヒーローエリアに波紋が広がるアニメーション。「今日の豆」進捗が波の高さで表現され、タップすると今日の記録入力シートを呼び出す。
   - 記録シートでは1日の点数（0〜100を想定）と、ポジティブ/ネガティブに影響した出来事を簡単に入力。
   - 今日のタスク一覧（カテゴリ毎タブ）。
   - 上部に連続達成日数を表示するバッジ。
   - ホーム画面を下方向にスクロールすると過去の記録セクションに切り替わり、カレンダービューで日毎のスコアを可視化。直近のポジティブ/ネガティブ要因ランキングを並べて振り返りを促す。
   - タスクカード：タイトル、所要時間目安、完了チェック。
2. **タスク編集画面**
   - タイトル、カテゴリ、実行頻度（毎日/曜日指定/カスタム）、通知時間、メモ。
3. **履歴・統計画面**
   - カレンダー形式で達成状況と日別スコアを表示。
   - ポジティブ/ネガティブ要因のランキングや発生頻度をグラフ化。
   - 累計豆ポイント、レベル、達成したバッジ。
4. **設定画面**
   - 通知オン/オフ、時間帯設定、テーマ切替。

## 9. 技術スタック
- **フレームワーク**：React Native (Expo)
- **言語**：TypeScript
- **状態管理**：Zustand
- **UIライブラリ**：React Native Paper
- **ローカルデータ**：AsyncStorage
- **通知**：Expo Notifications
- **テスト**：Jest + React Native Testing Library（コンポーネント単位）

## 10. データフロー
1. アプリ起動時にAsyncStorageからタスクと設定を読み込み、Zustandストアを初期化。
2. ホーム画面の波アニメーションをタップすると今日の記録モーダルが開き、`LogService`が`dailyScore`とポジティブ/ネガティブ要因を保存。
3. ユーザーがタスク完了ボタンを押すと、`LogService`が当日分の`DailyLog`を更新し、`RewardService`がポイントと連続日数を再計算。
4. 更新されたストアはUIに即時反映される。カレンダーセクションやランキングも同時に再計算。
5. 通知設定変更時はExpo Notificationsのスケジュールを再設定。

## 11. 今後のロードマップ
1. **フェーズ1（MVP）**：ローカルのみでのタスク管理・記録機能を実装。
2. **フェーズ2**：ユーザー登録・クラウド同期・複数デバイス対応。
3. **フェーズ3**：ソーシャル機能（家族や友人との共有、ランキング）。
4. **フェーズ4**：AI提案（ユーザー行動に応じたおすすめ習慣）。

## 12. プロトタイプ開発のタスク例
- Expoプロジェクト初期化
- 基本画面（ホーム/編集/履歴/設定）実装
- Zustandストアでの状態管理
- AsyncStorageを使ったデータ永続化
- Expo Notificationsでのリマインダー設定
- Jestによる主要コンポーネントのスナップショットテスト

## 13. リスクと対策
| リスク | 内容 | 対策 |
| --- | --- | --- |
| 仕様不確定 | 公式アプリとの差異 | プロトタイプ段階でユーザーテストを実施しフィードバックを反映。 |
| 通知制限 | OSごとの通知仕様差異 | Expo通知APIのガイドラインを確認しプラットフォームごとに検証。 |
| データ消失 | ローカル保存のみ | フェーズ2でクラウド同期を計画。 |
| 継続率低下 | モチベーション維持が難しい | バッジや日替わりメッセージなど追加施策を検討。 |

## 14. 成功指標（KPI）
- 7日連続利用率（週継続率）
- 1日あたりの平均完了タスク数
- リマインダー通知からのタスク完了率
- 初回登録から30日後のアクティブ率

以上の設計をもとに、次ステップとしてExpoを用いたプロトタイプ実装を進めます。
